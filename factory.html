
<html>

<head>

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Factory Floor</title>

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" />

<style type="text/css">
.sensor {
	background: #aaa;
	width: 150px;
	height: 150px;
	float: left;
	border: 1px solid black;
	border-right-style: dashed;
}

.bay {
	background: #ddd;
	width: 300px;
	height: 150px;
	float: right;
	border: 1px solid black;
	border-left-style: dashed;
}

.corridor {
	background: #ada;
	width: 150px;
	height: 150px;
	border: 1px solid black;
}

.stall {
	background: #dda;
	width: 150px;
	height: 150px;
	border: 1px solid black;
}

.bag {
	background: #FFE9E3;
	width: 500px;
	float: left;
	height: 750px;
	border: 1px solid black;
	margin: auto;
	margin-left: 20px;
}
</style>

<script src="http://code.jquery.com/jquery-latest.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
<script src="javascripts/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>

<script type="text/javascript">
	var socket = io();
	var blue_robot = "#331CFF";
	var green_robot = "#47FF5A";
	var pink = "#FFE9E3";
	var yellow = "#E6E67C";

	function bayClick(id) {
		document.getElementById(id).innerHTML = "Putting task here"
		document.getElementById(id).style.background = "#FF0000";

		socket.emit('AddTask', {
			msg : id
		});
	}

	function setDefaults(tileId, robotId) {

		document.getElementById('bay4').innerHTML = "Robot 1 position"
		document.getElementById('bay4').style.background = blue_robot;
		document.getElementById('bay8').innerHTML = "Robot 2 position"
		document.getElementById('bay8').style.background = green_robot;

		var colorToSet = "";
		if (robotId == 1)
			colorToSet = blue_robot;
		else
			colorToSet = green_robot;

		if (tileId === 5)
			document.getElementById('bay5').style.background = colorToSet;
		else
			document.getElementById('bay5').style.background = yellow;

		if (tileId === 6)
			document.getElementById('bay6').style.background = colorToSet;
		else
			document.getElementById('bay6').style.background = yellow;

		if (tileId === 7)
			document.getElementById('bay7').style.background = colorToSet;
		else
			document.getElementById('bay7').style.background = yellow;

		if (tileId === 1)
			document.getElementById('bay1').style.background = colorToSet;
		else
		{
			document.getElementById('bay1').style.background = pink;
			document.getElementById('bay1').innerHTML = "1";
		}
		if (tileId === 2)
			document.getElementById('bay2').style.background = colorToSet;
		else
		{
			document.getElementById('bay2').style.background = pink;
			document.getElementById('bay2').innerHTML = "2";
		}

		if (tileId === 3)
			document.getElementById('bay3').style.background = colorToSet;
		else
		{
			document.getElementById('bay3').style.background = pink;
			document.getElementById('bay3').innerHTML = "3";
		}

	}

	socket.on('connect', function(data) {
		alert("Connected to Node .. ready to recieve message");
		setDefaults(0, 0);

	});

	socket.on('updateUI', function(data) {

		var tile = parseInt(data.tileId);
		var robot = parseInt(data.robot);
		//alert(robot+" -- "+tile);
		setDefaults(tile, robot);
	});

	socket.on('Bag', function(data) {
		document.getElementById('theList').innerHTML += ('<li> <FONT SIZE = 5>'
				+ data.msg + '</FONT> </li>');
	});

	function bagClick(id) {

	}
</script>

</head>


<body>


	<br />
	<br />
	<br />


	<div class="container" style="float: right">

		<center>

			<div style="width: 600px; text-align: center; font-size: 20pt;">

				<div style="width: 450px; float: left;">

					<div style="width: 450px; height: 150px;"></div>

					<div style="width: 450px; height: 150px;">
						<div class="sensor">S</div>
						<div id="bay1" onclick="bayClick(this.id)" class="bay">1</div>
					</div>

					<div style="width: 450px; height: 150px;">
						<div class="sensor">S</div>
						<div id="bay2" onclick="bayClick(this.id)" class="bay">2</div>
					</div>

					<div style="width: 450px; height: 150px;">
						<div class="sensor">S</div>
						<div id="bay3" onclick="bayClick(this.id)" class="bay">3</div>
					</div>

					<div style="width: 450px; height: 150px;"></div>

				</div>

				<div style="width: 150px; float: right">

					<div id="bay4" class="stall">4</div>

					<div id="bay5" class="corridor">5</div>

					<div id="bay6" class="corridor">6</div>

					<div id="bay7" class="corridor">7</div>

					<div id="bay8" class="stall">8</div>

				</div>

			</div
		</center>


	</div>


	<div class="bag" id="bag" onclick="bagClick(this.id)">

		<ul id="theList">

		</ul>
	</div>


</body>

</html>